<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Django Practice</title>

    <!-- Add your common styles here -->
    {% comment %} <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-rZn116We5r5foB4mG86K8cFHTGCpgo+H70vD6jNx6t5KXI4JPK/lQifw83dOoPz" crossorigin="anonymous"> {% endcomment %}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    {% load static %}
    <link rel="stylesheet" type="text/css" href="{% static 'main/css/base.css' %}">

    {% block extra_head %}{% endblock %}
</head>
<body>
    <div class='container mt-2 pb-2'>
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb bg-dark text-light">
                {% for crumb in breadcrumbs %}
                    {% if forloop.last %}
                        <li class="breadcrumb-item active" aria-current="page">{{ crumb.name }}</li>
                    {% else %}
                        <li class="breadcrumb-item"><a href="{{ crumb.url }}">{{ crumb.name }}</a></li>
                    {% endif %}
                {% endfor %}
            </ol>
        </nav>

        {% block content %}{% endblock %}

        {% block modals %}
          <div class="modal fade" id="createlibraryModal" tabindex="-1" role="dialog" aria-labelledby="createlibraryModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-scrollable modal-dark" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body" id="libraryBodyModal">
                  {% block form_include %}{% endblock%}
                </div>
              </div>
            </div>
          </div>
        {% endblock %}
    </div>

    <!-- Add your common scripts here -->
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    {% block extra_scripts %}
      <script>
        $(document).ready(function(){
          $('#library_form').submit(function (e) {
            e.preventDefault();
            $.ajax({
              type: 'POST',
              url: $(this).attr('action'),
              data: $(this).serialize(),
              success: function(response) {
                if(response.success) {
                  $('#createlibraryModal').modal('hide');
                  $('#library_form')[0].reset();
    
                  location.reload();
                }
                else {
                  $('#libraryBodyModal').html(response)
                }
              },
              error: function () {
                // Handle errors if any
                alert('Error submitting form');
              }
            });
          })
        });
      </script>
    {% endblock %}
</body>
</html>
